<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проект</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            /* background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); */
            background-image: url("bg.png");
            min-height: 100vh;
            display: flex;
            padding: 20px;
            color: white;
            overflow-x: hidden;
        }
        
        .ui-container {
            width: 350px;
            background-color: rgba(30, 30, 46, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-right: 20px;
            height: fit-content;
            max-height: 95vh;
            overflow-y: auto;
        }
        
        .canvas-container {
            flex: 1;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.0);
            position: relative;
            background: #1e1e2e;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8rem;
            color: #ffffff;
        }
        
        .description {
            text-align: center;
            margin-bottom: 25px;
            color: #a5a8d4;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .main-button {
            background: linear-gradient(135deg, #6272a4, #44475a);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .main-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #7284b8, #555870);
        }
        
        .main-button.active {
            background: linear-gradient(135deg, #ff79c6, #bd93f9);
        }
        
        .sub-container {
            margin-left: 20px;
            margin-top: 8px;
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .sub-button {
            background: linear-gradient(135deg, #44475a, #343746);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .sub-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 7px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #555870, #44475a);
        }
        
        .sub-button.active {
            background: linear-gradient(135deg, #50fa7b, #8be9fd);
            color: #282a36;
        }
        
        .sub-sub-container {
            margin-left: 20px;
            margin-top: 8px;
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .sub-sub-button {
            background: linear-gradient(135deg, #343746, #282a36);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .sub-sub-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #44475a, #343746);
        }
        
        .sub-sub-button.active {
            background: linear-gradient(135deg, #ffb86c, #f1fa8c);
            color: #282a36;
        }
        
        .arrow {
            transition: transform 0.3s ease;
            font-size: 0.8rem;
        }
        
        .rotated {
            transform: rotate(90deg);
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .footer {
            text-align: center;
            margin-top: 25px;
            color: #6272a4;
            font-size: 0.85rem;
        }
        
        .shape-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(134, 139, 167, 0.2);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            display: none;
        }
        
        .shape-info h3 {
            color: #faf9fa;
            margin-bottom: 8px;
        }
        
        .shape-info p {
            color: #f8f8f2;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(40, 42, 54, 0.8);
            padding: 15px;
            border-radius: 10px;
            color: #f8f8f2;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="ui-container">
        <h1>Фигуры</h1>
        
        <p class="description">
            Разделы
        </p>
        
        <div class="button-container">
            <!-- Основные кнопки -->
            <button class="main-button" onclick="toggleSubsection(this, 'primitives')">
                Примитивы
                <span class="arrow">▶</span>
            </button>
            <div id="primitives" class="sub-container">
                <button class="sub-button" onclick="toggleSubSubsection(this, 'basic-primitives')">
                    Базовые примитивы
                    <span class="arrow">▶</span>
                </button>
                <div id="basic-primitives" class="sub-sub-container">
                    <button class="sub-sub-button" onclick="showShape('cube')">
                        Куб
                    </button>
                    <button class="sub-sub-button" onclick="showShape('sphere')">
                        Сфера
                    </button>
                    <button class="sub-sub-button" onclick="showShape('cylinder')">
                        Цилиндр
                    </button>
                </div>
                
                <button class="sub-button" onclick="toggleSubSubsection(this, 'complex-primitives')">
                    Сложные примитивы
                    <span class="arrow">▶</span>
                </button>
                <div id="complex-primitives" class="sub-sub-container">
                    <button class="sub-sub-button" onclick="showShape('torus')">
                        Тор
                    </button>
                    <button class="sub-sub-button" onclick="showShape('cone')">
                        Конус
                    </button>
                    <button class="sub-sub-button" onclick="showShape('octahedron')">
                        Октаэдр
                    </button>
                </div>
            </div>
            
            <button class="main-button" onclick="toggleSubsection(this, 'polyhedra')">
                Многогранники
                <span class="arrow">▶</span>
            </button>
            <div id="polyhedra" class="sub-container">
                <button class="sub-button" onclick="toggleSubSubsection(this, 'platonic')">
                    Платоновы тела
                    <span class="arrow">▶</span>
                </button>
                <div id="platonic" class="sub-sub-container">
                    <button class="sub-sub-button" onclick="showShape('tetrahedron')">
                        Тетраэдр
                    </button>
                    <button class="sub-sub-button" onclick="showShape('icosahedron')">
                        Икосаэдр
                    </button>
                    <button class="sub-sub-button" onclick="showShape('dodecahedron')">
                        Додекаэдр
                    </button>
                </div>
                
                <button class="sub-button" onclick="toggleSubSubsection(this, 'archimedean')">
                    Архимедовы тела
                    <span class="arrow">▶</span>
                </button>
                <div id="archimedean" class="sub-sub-container">
                    <button class="sub-sub-button" onclick="showShape('truncatedCube')">
                        Усечённый куб
                    </button>
                    <button class="sub-sub-button" onclick="showShape('cuboctahedron')">
                        Кубооктаэдр
                    </button>
                </div>
            </div>
            
            <button class="main-button" onclick="toggleSubsection(this, 'extrusions')">
                Экструзии
                <span class="arrow">▶</span>
            </button>
            <div id="extrusions" class="sub-container">
                <button class="sub-button" onclick="toggleSubSubsection(this, 'lathe')">
                    Смешные
                    <span class="arrow">▶</span>
                </button>
                <div id="lathe" class="sub-sub-container">
                    <button class="sub-sub-button" onclick="showShape('lathe')">
                        Смешная фигура
                    </button>
                </div>
                
                <button class="sub-button" onclick="toggleSubSubsection(this, 'tubes')">
                    Трубы
                    <span class="arrow">▶</span>
                </button>
                <div id="tubes" class="sub-sub-container">
                    <button class="sub-sub-button" onclick="showShape('tube')">
                        Труба
                    </button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            Выберите объект для отображения
        </div>
    </div>

    <div class="canvas-container" id="canvas-container">
        <!-- <div class="controls">
            Перетащите для вращения<br>
            Колесико для масштабирования
        </div> -->
        <div class="shape-info" id="shape-info">
            <h3 id="shape-title">Название фигуры</h3>
            <p id="shape-description">Описание фигуры появится здесь</p>
        </div>
    </div>

    <script>
        // Three.js переменные
        let scene, camera, renderer, controls;
        let mouseX = 0, mouseY = 0;
        let windowHalfX = window.innerWidth / 2;
        let windowHalfY = window.innerHeight / 2;
        
        // Хранилище всех фигур
        const shapes = {};
        let currentShapeType = null;
        
        // Информация о фигурах
        const shapeInfo = {
            cube: {
                title: "Куб",
                description: "Куб — правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин."
            },
            sphere: {
                title: "Сфера",
                description: "информация про сферу"
            },
            cylinder: {
                title: "Цилиндр",
                description: "информация про сферу цилиндр"
            },
            torus: {
                title: "Тор",
                description: "информация про тор"
            },
            cone: {
                title: "Конус",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            },
            octahedron: {
                title: "Октаэдр",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            },
            tetrahedron: {
                title: "Тетраэдр",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            },
            icosahedron: {
                title: "Икосаэдр",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            },
            dodecahedron: {
                title: "Додекаэдр",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            },
            truncatedCube: {
                title: "Усёченный куб",
                description: "Усечённый куб (или усечённый гексаэдр) — это полуправильный многогранник, который относится к телам Архимеда. Он состоит из 14 граней: 6 правильных восьмиугольников и 8 правильных треугольников. В каждой из его 24 вершин сходятся две восьмиугольные и одна треугольная грань."
            },
            cuboctahedron: {
                title: "Кубооктаэдр",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            },
            lathe: {
                title: "Смешная фигура",
                description: "я не знаю что это, похоже на вазу"
            },
            tube: {
                title: "Труба",
                description: "НЕ (правильный многогранник, каждая грань которого представляет собой квадрат. Имеет 6 граней, 12 рёбер и 8 вершин.)"
            }
        };
        
        // Инициализация Three.js сцены
        function initThreeJS() {
            const container = document.getElementById('canvas-container');
            
            // Создание сцены
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1e1e2e);
            
            // Создание камеры
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 5;
            
            // Создание рендерера
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 2;
            controls.maxDistance = 20;
            controls.maxPolarAngle = Math.PI;
            
            // Добавление освещения
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            // Создаем все фигуры заранее, но скрываем их
            createAllShapes();
            
            // Обработчики событий мыши
            document.addEventListener('mousemove', onDocumentMouseMove, false);
            document.addEventListener('wheel', onDocumentMouseWheel, false);
            
            // Обработчик изменения размера окна
            window.addEventListener('resize', onWindowResize, false);
            
            // Начальная анимация
            animate();
        }
        
        // Создание всех фигур
        function createAllShapes() {
            for (const type in shapeInfo) {
                shapes[type] = createShape(type);
                shapes[type].visible = false; // Сразу скрываем все фигуры
                scene.add(shapes[type]);
            }
        }
        
        // Создание фигуры по типу
        function createShape(type) {
            const geometry = getGeometryByType(type);
            const material = new THREE.MeshPhongMaterial({ 
                color: getRandomColor(),
                shininess: 100,
                specular: 0x222222
            });
            
            const mesh = new THREE.Mesh(geometry, material);
            return mesh;
        }
        
        // Получение геометрии по типу
        function getGeometryByType(type) {
            switch(type) {
                case 'cube':
                    return new THREE.BoxGeometry(2, 2, 2);
                case 'sphere':
                    return new THREE.SphereGeometry(1.5, 32, 32);
                case 'cylinder':
                    return new THREE.CylinderGeometry(1, 1, 2, 32);
                case 'torus':
                    return new THREE.TorusGeometry(1.5, 0.5, 16, 100);
                case 'cone':
                    return new THREE.ConeGeometry(1.5, 2, 32);
                case 'octahedron':
                    return new THREE.OctahedronGeometry(1.5);
                case 'tetrahedron':
                    return new THREE.TetrahedronGeometry(1.5);
                case 'icosahedron':
                    return new THREE.IcosahedronGeometry(1.5);
                case 'dodecahedron':
                    return new THREE.DodecahedronGeometry(1.5);
                case 'truncatedCube':
                    return new THREE.BoxGeometry(1.5, 1.5, 1.5);
                case 'cuboctahedron':
                    // Для простоты используем октаэдр, так как Cuboctahedron нет в стандартной библиотеке
                    return new THREE.OctahedronGeometry(1.5);
                case 'lathe':
                    const points = [];
                    for (let i = 0; i < 10; i++) {
                        points.push(new THREE.Vector2(Math.sin(i * 0.2) * 1 + 1, (i - 5) * 0.4));
                    }
                    return new THREE.LatheGeometry(points, 20);
                case 'tube':
                    const path = new THREE.CatmullRomCurve3([
                        new THREE.Vector3(-2, 0, 0),
                        new THREE.Vector3(-1, 1, 0),
                        new THREE.Vector3(0, 0, 0),
                        new THREE.Vector3(1, -1, 0),
                        new THREE.Vector3(2, 0, 0)
                    ]);
                    return new THREE.TubeGeometry(path, 64, 0.5, 8, false);
                default:
                    return new THREE.BoxGeometry(1, 1, 1);
            }
        }
        
        // Показать фигуру
        function showShape(type) {
            // Скрываем предыдущую фигуру
            if (currentShapeType && shapes[currentShapeType]) {
                shapes[currentShapeType].visible = false;
            }
            
            // Показываем новую фигуру
            shapes[type].visible = true;
            currentShapeType = type;
            
            // Показываем информацию о фигуре
            const info = shapeInfo[type];
            document.getElementById('shape-title').textContent = info.title;
            document.getElementById('shape-description').textContent = info.description;
            document.getElementById('shape-info').style.display = 'block';
            
            // Активируем кнопку
            deactivateAllButtons();
            event.target.classList.add('active');
        }
        
        // Деактивировать все кнопки
        function deactivateAllButtons() {
            const buttons = document.querySelectorAll('.main-button, .sub-button, .sub-sub-button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
        }
        
        // Переключение подразделов (основные кнопки)
        function toggleSubsection(button, subsectionId) {
            const subsection = document.getElementById(subsectionId);
            const arrow = button.querySelector('.arrow');
            
            // Закрываем все другие подразделы
            const allSubsections = document.querySelectorAll('.sub-container');
            allSubsections.forEach(sub => {
                if (sub.id !== subsectionId) {
                    sub.style.display = 'none';
                    const subArrow = sub.previousElementSibling.querySelector('.arrow');
                    if (subArrow) subArrow.classList.remove('rotated');
                    
                    // Закрываем все под-подразделы внутри
                    const allSubSubsections = sub.querySelectorAll('.sub-sub-container');
                    allSubSubsections.forEach(subSub => {
                        subSub.style.display = 'none';
                        const subSubArrow = subSub.previousElementSibling.querySelector('.arrow');
                        if (subSubArrow) subSubArrow.classList.remove('rotated');
                    });
                }
            });
            
            // Переключаем текущий подраздел
            if (subsection.style.display === 'block') {
                subsection.style.display = 'none';
                arrow.classList.remove('rotated');
            } else {
                subsection.style.display = 'block';
                arrow.classList.add('rotated');
            }
            
            // Активируем кнопку
            deactivateAllButtons();
            button.classList.add('active');
        }
        
        // Переключение под-подразделов
        function toggleSubSubsection(button, subSubsectionId) {
            const subSubsection = document.getElementById(subSubsectionId);
            const arrow = button.querySelector('.arrow');
            
            // Закрываем все другие под-подразделы в этом же подразделе
            const parentSubsection = button.closest('.sub-container');
            const allSubSubsections = parentSubsection.querySelectorAll('.sub-sub-container');
            allSubSubsections.forEach(subSub => {
                if (subSub.id !== subSubsectionId) {
                    subSub.style.display = 'none';
                    const subSubArrow = subSub.previousElementSibling.querySelector('.arrow');
                    if (subSubArrow) subSubArrow.classList.remove('rotated');
                }
            });
            
            // Переключаем текущий под-подраздел
            if (subSubsection.style.display === 'block') {
                subSubsection.style.display = 'none';
                arrow.classList.remove('rotated');
            } else {
                subSubsection.style.display = 'block';
                arrow.classList.add('rotated');
            }
            
            // Активируем кнопку
            deactivateAllButtons();
            button.classList.add('active');
        }
        
        // Случайный цвет
        function getRandomColor() {
            const colors = [
                0xff5555, 0x50fa7b, 0xf1fa8c, 0xbd93f9, 
                0xff79c6, 0x8be9fd, 0xffb86c, 0x6272a4
            ];
            return 0xf9df76// colors[Math.floor(Math.random() * colors.length)];
        }
        
        // Обработчики событий мыши
        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX) / 100;
            mouseY = (event.clientY - windowHalfY) / 100;
        }
        
        function onDocumentMouseWheel(event) {
            camera.position.z += event.deltaY * 0.01;
            camera.position.z = Math.max(2, Math.min(10, camera.position.z));
        }
        
        function onWindowResize() {
            const container = document.getElementById('canvas-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }
        // Анимация
        function animate() {
            requestAnimationFrame(animate);
            
            controls.update();
            
            // if (currentShapeType && shapes[currentShapeType] && shapes[currentShapeType].visible) {
            //     shapes[currentShapeType].rotation.y += 0.005;
            // }
            
            renderer.render(scene, camera);
        }
        
        window.onload = function() {
            initThreeJS();
            showShape('cube');
        };
    </script>
</body>
</html>